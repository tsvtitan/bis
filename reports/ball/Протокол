<?xml version="1.0" encoding="utf-8"?>
<TBisFastReport Version="4.1.40" DotMatrixReport="False" IniFile="\Software\Fast Reports" OldStyleProgress="True" PreviewOptions.Buttons="1535" PreviewOptions.Zoom="1" PreviewOptions.ZoomMode="zmPageWidth" PrintOptions.Printer="Ïî óìîë÷àíèþ" PrintOptions.PrintOnSheet="0" ReportOptions.CreateDate="39554,5208128935" ReportOptions.Description.Text="" ReportOptions.LastChange="39554,5208128935" ScriptLanguage="PascalScript" ScriptText.Text="var&#13;&#10;  FTirageId: Variant;&#13;&#10;  FFirstRoundSum: Extended;&#13;&#10;  FSecondRoundSum: Extended;&#13;&#10;  FThirdRoundSum: Extended;&#13;&#10;  FFourthRoundSum: Extended;                                                         &#13;&#10;&#13;&#10;procedure ButtonTirageOnClick(Sender: TfrxComponent);&#13;&#10;begin&#13;&#10;  if DataSelectInto('Òèðàæû',ProviderTirage,'TIRAGE_ID',FTirageId) then begin&#13;&#10;    try&#13;&#10;      FTirageId:=ProviderTirage.FieldByName('TIRAGE_ID').Value;&#13;&#10;      EditTirage.Text:=Format('Òèðàæ: %s îò %s',&#13;&#10;                              [ProviderTirage.FieldByName('NUM').AsString,&#13;&#10;                               ProviderTirage.FieldByName('EXECUTION_DATE').AsString]);  &#13;&#10;      MemoTirage.Text:=EditTirage.Text;&#13;&#10;&#13;&#10;      ProviderStatistics.Params.Clear;&#13;&#10;      with ProviderStatistics.Params do begin                                            &#13;&#10;        Add('TIRAGE_ID',ptInput).Value:=FTirageId;&#13;&#10;        Add('USED_COUNT',ptOutput);                    &#13;&#10;        Add('PRIZE_SUM',ptOutput);                    &#13;&#10;        Add('JACKPOT_SUM',ptOutput);                    &#13;&#10;        Add('FIRST_ROUND_SUM',ptOutput);&#13;&#10;        Add('SECOND_ROUND_SUM',ptOutput);&#13;&#10;        Add('THIRD_ROUND_SUM',ptOutput);&#13;&#10;        Add('FOURTH_ROUND_SUM',ptOutput);&#13;&#10;      end;                    &#13;&#10;      ProviderStatistics.Execute;&#13;&#10;      Report.Variables['USED_COUNT']:=QuotedStr(VarToStrDef(ProviderStatistics.Params.Items[1].Value,''));        &#13;&#10;      Report.Variables['PRIZE_SUM']:=QuotedStr(VarToStrDef(ProviderStatistics.Params.Items[2].Value,''));        &#13;&#10;      Report.Variables['JACKPOT_SUM']:=QuotedStr(VarToStrDef(ProviderStatistics.Params.Items[3].Value,''));        &#13;&#10;      Report.Variables['FIRST_ROUND_SUM']:=QuotedStr(VarToStrDef(ProviderStatistics.Params.Items[4].Value,''));        &#13;&#10;      Report.Variables['SECOND_ROUND_SUM']:=QuotedStr(VarToStrDef(ProviderStatistics.Params.Items[5].Value,''));        &#13;&#10;      Report.Variables['THIRD_ROUND_SUM']:=QuotedStr(VarToStrDef(ProviderStatistics.Params.Items[6].Value,''));        &#13;&#10;      Report.Variables['FOURTH_ROUND_SUM']:=QuotedStr(VarToStrDef(ProviderStatistics.Params.Items[7].Value,''));        &#13;&#10;&#13;&#10;      FFirstRoundSum:=ProviderStatistics.Params.Items[4].Value;&#13;&#10;      FSecondRoundSum:=ProviderStatistics.Params.Items[5].Value;    &#13;&#10;      FThirdRoundSum:=ProviderStatistics.Params.Items[6].Value;  &#13;&#10;      FFourthRoundSum:=ProviderStatistics.Params.Items[7].Value;                                                             &#13;&#10;          &#13;&#10;    finally&#13;&#10;      &#13;&#10;    end;              &#13;&#10;  end;            &#13;&#10;end;&#13;&#10;&#13;&#10;procedure ButtonOkOnClick(Sender: TfrxComponent);&#13;&#10;begin&#13;&#10;  if Trim(EditTirage.Text)='' then begin&#13;&#10;    ShowError('Âûáåðèòå òèðàæ.');&#13;&#10;    EditTirage.SetFocus;                                &#13;&#10;  end else begin&#13;&#10;    Provider.Params.Clear;&#13;&#10;    Provider.Params.Add('TIRAGE_ID',ptInput).Value:=FTirageId;&#13;&#10;&#13;&#10;    DialogPage.ModalResult:=mrOk;&#13;&#10;  end;              &#13;&#10;end;&#13;&#10;&#13;&#10;procedure GroupHeaderOnBeforePrint(Sender: TfrxComponent);&#13;&#10;var&#13;&#10;  RoundNum: Integer;&#13;&#10;  Sum: Extended;                                 &#13;&#10;begin&#13;&#10;  RoundNum:=Provider.FieldByName('ROUND_NUM').AsInteger;&#13;&#10;  Sum:=0.0;&#13;&#10;  case RoundNum of&#13;&#10;    1: Sum:=FFirstRoundSum;&#13;&#10;    2: Sum:=FSecondRoundSum;&#13;&#10;    3: Sum:=FThirdRoundSum;&#13;&#10;    4: Sum:=FFourthRoundSum;&#13;&#10;  end;            &#13;&#10;  Report.Variables['ROUND_SUM']:=QuotedStr(FloatToStr(Sum));      &#13;&#10;end;&#13;&#10;&#13;&#10;begin&#13;&#10;  FTirageId:=Null;                             &#13;&#10;  FFirstRoundSum:=0.0;&#13;&#10;  FSecondRoundSum:=0.0;&#13;&#10;  FThirdRoundSum:=0.0;&#13;&#10;  FFourthRoundSum:=0.0;                                                         &#13;&#10;  EditTirage.Color:=ColorControlReadOnly;      &#13;&#10;end." PropData="08446174617365747301010C2A00000020446174615365743D2250726F76696465722220446174615365744E616D653D2250726F76696465722200010C3000000020446174615365743D2250726F76696465725469726167652220446174615365744E616D653D2250726F76696465722200010C3E00000020446174615365743D2250726F7669646572537461746973746963732220446174615365744E616D653D2250726F766964657253746174697374696373220000095661726961626C657301010C16000000204E616D653D22204E65772043617465676F7279312200010C12000000204E616D653D22555345445F434F554E542200010C11000000204E616D653D225052495A455F53554D2200010C13000000204E616D653D224A41434B504F545F53554D2200010C17000000204E616D653D2246495253545F524F554E445F53554D2200010C18000000204E616D653D225345434F4E445F524F554E445F53554D2200010C17000000204E616D653D2254484952445F524F554E445F53554D2200010C18000000204E616D653D22464F555254485F524F554E445F53554D2200010C12000000204E616D653D225449524147455F4E554D2200010C16000000204E616D653D22455845435554494F4E5F444154452200010C11000000204E616D653D22524F554E445F53554D220000055374796C650100">
  <TfrxDataPage Name="Data" Height="1000" Left="0" Top="0" Width="1000">
    <TBisProvider Name="Provider" UserName="Provider" CloseDataSource="True" FieldAliases.Text="TICKET_ID=TICKET_ID&#13;&#10;ROUND_NUM=ROUND_NUM&#13;&#10;NUM=NUM&#13;&#10;SERIES=SERIES&#13;&#10;PRIZE_NAME=PRIZE_NAME&#13;&#10;PRIZE_COST=PRIZE_COST&#13;&#10;SURNAME=SURNAME&#13;&#10;NAME=NAME&#13;&#10;PATRONYMIC=PATRONYMIC&#13;&#10;ADDRESS=ADDRESS&#13;&#10;PHONE=PHONE" ProviderName="GET_PROTOCOL" FetchCount="-1" OpenMode="omExecute" PropData="05704C65667402380470546F700234"/>
    <TBisProvider Name="ProviderTirage" UserName="Provider" CloseDataSource="True" FieldAliases.Text="" FetchCount="-1" OpenMode="omOpen" PropData="05704C65667402480470546F70039800"/>
    <TBisProvider Name="ProviderStatistics" UserName="ProviderStatistics" CloseDataSource="True" FieldAliases.Text="" ProviderName="GET_LOTTERY_STATISTICS" FetchCount="-1" OpenMode="omOpen" PropData="05704C65667403A0000470546F70026C"/>
  </TfrxDataPage>
  <TfrxReportPage Name="Page" Font.Charset="1" Font.Color="8421504" Font.Height="-13" Font.Name="Arial" Font.Style="0" PaperWidth="210" PaperHeight="297" PaperSize="9" LeftMargin="10" RightMargin="10" TopMargin="10" BottomMargin="5" ColumnWidth="0" ColumnPositions.Text="" HGuides.Text="" VGuides.Text="">
    <TfrxHeader Name="Header" Height="22,67718" Left="0" Top="257,00804" Width="718,1107" ReprintOnNewPage="True">
      <TfrxMemoView Name="Memo6" Left="0" Top="0" Width="41,57483" Height="22,67718" Color="-16777201" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="â„–"/>
      <TfrxMemoView Name="Memo8" Left="253,22851" Top="0" Width="94,48825" Height="22,67718" Color="-16777201" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="Ð‘Ð¸Ð»ÐµÑ‚"/>
      <TfrxMemoView Name="Memo9" Left="347,71676" Top="0" Width="370,39394" Height="22,67718" Color="-16777201" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="Ð’Ð»Ð°Ð´ÐµÐ»ÐµÑ† Ð±Ð¸Ð»ÐµÑ‚Ð°"/>
      <TfrxMemoView Name="Memo4" Left="41,57483" Top="0" Width="211,65368" Height="22,67718" Color="-16777201" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="ÐŸÑ€Ð¸Ð· / Ð¡ÑƒÐ¼Ð¼Ð°"/>
    </TfrxHeader>
    <TfrxMasterData Name="MasterData" Height="37,7953" Left="0" Top="351,49629" Width="718,1107" ColumnWidth="0" ColumnGap="0" DataSet="Provider" DataSetName="Provider" RowCount="0" Stretched="True">
      <TfrxMemoView Name="Memo13" Left="253,22851" Top="0" Width="94,48825" Height="18,89765" DataField="NUM" DataSet="Provider" DataSetName="Provider" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" GapX="4" HAlign="haCenter" ParentFont="False" Text="[Provider.&#34;NUM&#34;]"/>
      <TfrxMemoView Name="Memo14" Left="253,22851" Top="18,89765" Width="94,48825" Height="18,89765" DataField="SERIES" DataSet="Provider" DataSetName="Provider" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" GapX="4" HAlign="haCenter" ParentFont="False" Text="[Provider.&#34;SERIES&#34;]"/>
      <TfrxMemoView Name="Memo2" Left="347,71676" Top="0" Width="370,39394" Height="37,7953" DataSet="Provider" DataSetName="Provider" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" GapX="4" ParentFont="False" Text="[Provider.&#34;SURNAME&#34;] [Provider.&#34;NAME&#34;] [Provider.&#34;PATRONYMIC&#34;], [Provider.&#34;ADDRESS&#34;], [Provider.&#34;PHONE&#34;]"/>
      <TfrxMemoView Name="Memo20" Left="0" Top="0" Width="41,57483" Height="37,7953" DataSet="Provider" DataSetName="Provider" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" GapX="4" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="[Line]"/>
      <TfrxMemoView Name="Memo7" Left="41,57483" Top="0" Width="211,65368" Height="18,89765" DataSet="Provider" DataSetName="Provider" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" GapX="4" ParentFont="False" Text="[IIF(&#60;Provider.&#34;PRIZE_NAME&#34;&#62;='','Ð”ÐµÐ½ÑŒÐ³Ð¸',&#60;Provider.&#34;PRIZE_NAME&#34;&#62;)]"/>
      <TfrxMemoView Name="Memo3" Left="41,57483" Top="18,89765" Width="211,65368" Height="18,89765" DataSet="Provider" DataSetName="Provider" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="0" GapX="4" ParentFont="False" Text="[IIF(FloatToStr(&#60;Provider.&#34;PRIZE_COST&#34;&#62;)='0','-----',FloatToStr(&#60;Provider.&#34;PRIZE_COST&#34;&#62;))]"/>
    </TfrxMasterData>
    <TfrxReportTitle Name="ReportTitle" Height="177,63791" Left="0" Top="18,89765" Width="718,1107">
      <TfrxMemoView Name="Memo1" Left="0" Top="0" Width="718,1107" Height="26,45671" AutoWidth="True" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-19" Font.Name="Arial" Font.Style="1" HAlign="haCenter" ParentFont="False" VAlign="vaCenter" Text="ÐŸÑ€Ð¾Ñ‚Ð¾ÐºÐ¾Ð» Ñ€Ð¾Ð·Ñ‹Ð³Ñ€Ñ‹ÑˆÐ°"/>
      <TfrxMemoView Name="MemoTirage" Left="204,09462" Top="37,7953" Width="302,3624" Height="18,89765" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-16" Font.Name="Arial" Font.Style="1" HAlign="haCenter" ParentFont="False" Text="Ð¢Ð¸Ñ€Ð°Ð¶: [TIRAGE_NUM] Ð¾Ñ‚ [EXECUTION_DATE]"/>
      <TfrxMemoView Name="MemoUsedCount" Left="56,69295" Top="71,81107" Width="302,3624" Height="18,89765" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="8421504" Font.Height="-16" Font.Name="Arial" Font.Style="1" ParentFont="False" Text="ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð±Ð¸Ð»ÐµÑ‚Ð¾Ð²: [USED_COUNT]"/>
      <TfrxMemoView Name="MemoPrizeSum" Left="56,69295" Top="94,48825" Width="302,3624" Height="18,89765" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="8421504" Font.Height="-16" Font.Name="Arial" Font.Style="1" ParentFont="False" Text="ÐŸÑ€Ð¸Ð·Ð¾Ð²Ð¾Ð¹ Ñ„Ð¾Ð½Ð´: [PRIZE_SUM]"/>
      <TfrxMemoView Name="MemoJackpotSum" Left="56,69295" Top="117,16543" Width="302,3624" Height="18,89765" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="8421504" Font.Height="-16" Font.Name="Arial" Font.Style="1" ParentFont="False" Text="Ð¡ÑƒÐ¼Ð¼Ð° Ð´Ð¶ÐµÐº-Ð¿Ð¾Ñ‚Ð°: [JACKPOT_SUM]"/>
      <TfrxMemoView Name="MemoFirstRoundSum" Left="389,83488" Top="71,81107" Width="309,92146" Height="18,89765" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="8421504" Font.Height="-16" Font.Name="Arial" Font.Style="1" ParentFont="False" Text="Ð¡ÑƒÐ¼Ð¼Ð° 1 Ñ‚ÑƒÑ€Ð°: [FIRST_ROUND_SUM]"/>
      <TfrxMemoView Name="MemoSecondRoundSum" Left="389,83488" Top="94,48825" Width="309,92146" Height="18,89765" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="8421504" Font.Height="-16" Font.Name="Arial" Font.Style="1" ParentFont="False" Text="Ð¡ÑƒÐ¼Ð¼Ð° 2 Ñ‚ÑƒÑ€Ð°: [SECOND_ROUND_SUM]"/>
      <TfrxMemoView Name="MemoThirdRoundSum" Left="389,83488" Top="117,16543" Width="309,92146" Height="18,89765" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="8421504" Font.Height="-16" Font.Name="Arial" Font.Style="1" ParentFont="False" Text="Ð¡ÑƒÐ¼Ð¼Ð° 3 Ñ‚ÑƒÑ€Ð°: [THIRD_ROUND_SUM]"/>
      <TfrxMemoView Name="MemoFourthRoundSum" Left="389,83488" Top="139,84261" Width="309,92146" Height="18,89765" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="8421504" Font.Height="-16" Font.Name="Arial" Font.Style="1" ParentFont="False" Text="Ð¡ÑƒÐ¼Ð¼Ð° 4 Ñ‚ÑƒÑ€Ð°: [FOURTH_ROUND_SUM]"/>
    </TfrxReportTitle>
    <TfrxPageFooter Name="PageFooter" Height="22,67718" Left="0" Top="548,03185" Width="718,1107">
      <TfrxMemoView Name="Memo5" Left="642,5201" Top="3,77953000000002" Width="79,37013" Height="18,89765" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-11" Font.Name="Arial" Font.Style="0" HAlign="haRight" ParentFont="False" Text="[Page]"/>
    </TfrxPageFooter>
    <TfrxFooter Name="Footer" Height="26,45671" Left="0" Top="461,10266" Width="718,1107"/>
    <TfrxGroupHeader Name="GroupHeader" Height="26,45671" Left="0" Top="302,3624" Width="718,1107" OnBeforePrint="GroupHeaderOnBeforePrint" Condition="Provider.&#34;ROUND_NUM&#34;">
      <TfrxMemoView Name="Memo12" Left="0" Top="3,77953000000002" Width="347,71676" Height="18,89765" OnBeforePrint="Memo12OnBeforePrint" DataSet="Provider" DataSetName="Provider" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="1" GapX="4" ParentFont="False" Text="Ð¢ÑƒÑ€ [Provider.&#34;ROUND_NUM&#34;]"/>
      <TfrxLineView Name="Line1" Left="0" Top="25,45671" Width="249,44898" Height="0" Frame.Width="2" Diagonal="True"/>
    </TfrxGroupHeader>
    <TfrxGroupFooter Name="GroupFooter" Height="26,45671" Left="0" Top="411,96877" Width="718,1107">
      <TfrxMemoView Name="Memo10" Left="41,57483" Top="0" Width="306,14193" Height="18,89765" OnBeforePrint="Memo12OnBeforePrint" DataSet="Provider" DataSetName="Provider" DisplayFormat.DecimalSeparator="," Font.Charset="1" Font.Color="-16777208" Font.Height="-13" Font.Name="Arial" Font.Style="1" Frame.Typ="15" GapX="4" HAlign="haCenter" ParentFont="False" Text="Ð˜Ñ‚Ð¾Ð³Ð¾ Ð¿Ð¾ [Provider.&#34;ROUND_NUM&#34;] Ñ‚ÑƒÑ€Ñƒ: [Round(&#60;ROUND_SUM&#62;/COUNT(MasterData))] Ð½Ð° 1 Ð±Ð¸Ð»ÐµÑ‚"/>
    </TfrxGroupFooter>
  </TfrxReportPage>
  <TfrxDialogPage Name="DialogPage" Font.Charset="1" Font.Color="0" Font.Height="-11" Font.Name="Tahoma" Font.Style="0" BorderStyle="bsDialog" Caption="Ïðîòîêîë" Height="112" Left="326" Top="176" Width="301" OnClick="DialogPageOnClick">
    <TBisEditControl Name="EditTirage" Left="68" Top="12" Width="189" Height="21" Color="-16777192" MaxLength="0" PasswordChar="0" ReadOnly="True"/>
    <TfrxButtonControl Name="ButtonTirage" Left="264" Top="12" Width="21" Height="21" Hint="Âûáðàòü òèðàæ" Caption="..." OnClick="ButtonTirageOnClick"/>
    <TBisLabelControl Name="LabelTirage" Left="16" Top="15" Width="36" Height="13" Alignment="taRightJustify" Caption="Òèðàæ:" Color="-16777201" FocusControl="EditTirage"/>
    <TfrxButtonControl Name="ButtonOk" Left="127" Top="44" Width="75" Height="25" Caption="ÎÊ" Default="True" OnClick="ButtonOkOnClick"/>
    <TfrxButtonControl Name="ButtonCancel" Left="208" Top="44" Width="75" Height="25" Cancel="True" Caption="Îòìåíà" ModalResult="2"/>
  </TfrxDialogPage>
</TBisFastReport>
